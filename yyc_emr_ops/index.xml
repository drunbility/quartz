<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Yyc_emr_ops on</title><link>http://lowerfly.site/yyc_emr_ops/yyc_emr_ops/</link><description>Recent content in Yyc_emr_ops on</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="http://lowerfly.site/yyc_emr_ops/yyc_emr_ops/index.xml" rel="self" type="application/rss+xml"/><item><title/><link>http://lowerfly.site/yyc_emr_ops/yyc_emr_ops/edit-logs-%E9%94%99%E8%AF%AF%E5%AF%BC%E8%87%B4-hdfs-%E6%97%A0%E6%B3%95%E9%87%8D%E5%90%AF/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://lowerfly.site/yyc_emr_ops/yyc_emr_ops/edit-logs-%E9%94%99%E8%AF%AF%E5%AF%BC%E8%87%B4-hdfs-%E6%97%A0%E6%B3%95%E9%87%8D%E5%90%AF/</guid><description/></item><item><title/><link>http://lowerfly.site/yyc_emr_ops/yyc_emr_ops/%E4%BB%8E-active-nn-%E6%81%A2%E5%A4%8D-standy-nn/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://lowerfly.site/yyc_emr_ops/yyc_emr_ops/%E4%BB%8E-active-nn-%E6%81%A2%E5%A4%8D-standy-nn/</guid><description>standby nn由于各种原因,比如[[edit logs 错误导致 hdfs 无法重启|edit logs 回放失败]],启动失败，active nn正常，从active nn恢复standby nn
在控制台暂停standby nn，防止后台自动拉起 进入active nn所在的机器，进入hadoop用户，[[长期未完成 checkpoint 导致重启 namenode 慢问题#^d799b1|做一下checkpoint操作]] 进入standby nn所在的机器，进入hadoop用户，备份元数据目录，新建current，并将VERSION复制过去（如果VERSION文件不存在，可以去nn节点copy过来） 1 2 3 4 cd /data/emr/hdfs/namenode/ mv current current_bak mkdir current cp current_bak/VERSION current 初始化standby nn节点 控制台启动standby nn</description></item><item><title/><link>http://lowerfly.site/yyc_emr_ops/yyc_emr_ops/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%8D%A2%E8%A1%8C%E7%AC%A6/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://lowerfly.site/yyc_emr_ops/yyc_emr_ops/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%8D%A2%E8%A1%8C%E7%AC%A6/</guid><description>在ASCII中存在这样两个字符CR（编码为13）和 LF（编码为10），在编程中我们一般称其分别为 &amp;lsquo;\r&amp;rsquo; 和 &amp;lsquo;\n&amp;rsquo; 。他们被用来作为换行标志，但在不同系统中换行标志又不一样。下面是不同操作系统采用不同的换行符：
Unix和类Unix（如Linux）：换行符采用 \n Windows和MS-DOS：换行符采用 \r\n Mac OS X之前的系统：换行符采用 \r Mac OS X：换行符采用 \n 使用 cat -A [Filename] 查看，如下图所示，看到的为一个Windows形式的换行符，\r对应符号^M，\n 对应符号$.</description></item><item><title/><link>http://lowerfly.site/yyc_emr_ops/yyc_emr_ops/%E9%95%BF%E6%9C%9F%E6%9C%AA%E5%AE%8C%E6%88%90-checkpoint-%E5%AF%BC%E8%87%B4%E9%87%8D%E5%90%AF-namenode-%E6%85%A2%E9%97%AE%E9%A2%98/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://lowerfly.site/yyc_emr_ops/yyc_emr_ops/%E9%95%BF%E6%9C%9F%E6%9C%AA%E5%AE%8C%E6%88%90-checkpoint-%E5%AF%BC%E8%87%B4%E9%87%8D%E5%90%AF-namenode-%E6%85%A2%E9%97%AE%E9%A2%98/</guid><description>对于大规模的集群,如果长期未成功完成 checkpoint ,那么会积累非常多的 editlog 文件.重启 namenode 的时候,必须要回放 editlog ,以使内存中的目录树恢复到最新状态.回放 editlog 必然是逐个文件来回放的,此时如果积累了大量的 editlog 文件,那么这个过程会长达三个小时以上.增大 namenode 的内存可以适当加快这个过程.
edit 文件堆积处理 如果长期 edit 日志文件有堆积,可以进入安全模式后,手动运行 saveNamespace 命令来进行一次合并.</description></item></channel></rss>